# Принципы (практично): почему ИИ бустит и как сделать его “production-ready”

## 1) Это не про “умность” ИИ — это про инженерный контур
ИИ — вероятностная система. Он всегда будет привносить шум. Буст происходит, когда у тебя есть “мясорубка качества”:
спека → маленький дифф → тесты/линтер/типы → ревью → релиз.

Если нет объективной проверки (тесты/CI), ИИ превращается в генератор правдоподобных багов.

## 2) ИИ лучше всего работает на “изолируемых” задачах
Хорошие задачи:
- маленькие компоненты и CRUD,
- миграции и рефакторинг (особенно если есть тесты),
- документация и обвязка,
- “склейка” API, мелкие улучшения observability.

Плохие задачи (без сильного контроля):
- сложные доменные инварианты,
- безопасность/авторизация,
- конкурентность/распределённые транзакции,
- legacy без тестов,
- “переписать всё”.

## 3) Агент усиливает и пользу, и ущерб
Агенты хороши тем, что делают много действий подряд.
Это же делает их опасными: они масштабируют ошибки.

Лекарство: ограничения действий + лимиты + stop-policy (см. `ai-playbook/02-agent-policy.md`).

## 4) Контекст должен быть контрактным
ИИ должен видеть не “весь репозиторий”, а:
- публичные интерфейсы (типы, схемы, OpenAPI),
- примеры корректного поведения,
- правила ошибок/таймаутов/ретраев,
- стиль и соглашения репо.

Всё остальное — угадывание.

## 5) Production-ready рождается от автопроверок
Не “ИИ умный”, а “система ограничений умная”:
типизация + линтер + тесты + policy checks превращают генерацию в “поиск решения под ограничения”.

Если CI слабый — сначала усили CI.

## 6) Рабочие паттерны (используй как режимы)
### Паттерн A: “ИИ как джун под твоим руководством”
Ты задаёшь ограничения и что нельзя сломать. ИИ делает черновик + тесты. Ты принимаешь решения и проверяешь риски.

### Паттерн B: “ИИ как PR‑машина”
Не проси “сделай фичу целиком”. Проси маленькие PR:
“добавь логирование”, “покрой edge‑case тестом”, “вынеси модуль”, “добавь миграцию”.

### Паттерн C: “Автор + критик”
1) Агент‑автор пишет дифф.
2) Агент‑критик (без права править код) делает ревью по чек‑листу.

