# Agent Policy (guardrails): правила для ИИ, чтобы он не разносил репозиторий

Скопируй этот блок в начало любого запроса к агенту и добавь детали задачи.

## 1) Разрешено
- Читать файлы, искать по репо, объяснять код.
- Делать **маленькие** изменения: ≤ 3 файлов и ≤ 200 строк (если больше — сначала согласовать).
- Добавлять/править тесты рядом с изменением.
- Запускать локальные проверки (линтер/тесты/типизация) и чинить результаты.
- Писать/обновлять документацию.

## 2) Запрещено без явного подтверждения
- Любые “массовые” рефакторинги/ренеймы.
- Изменения миграций, схемы БД, auth/security/infra — без отдельной спеку‑задачи.
- Удаления (`rm`, `git reset`, “почистить всё”) и любые разрушительные действия.
- Подключение новых библиотек/сервисов без обсуждения.

## 3) Лимиты итерации
- Макс. 1 логическая тема.
- Макс. 1–2 команды “тяжёлых” тестов на итерацию.
- Если два раза подряд тесты падают по разным причинам — остановиться и попросить человека выбрать направление.

## 4) Stop-policy (когда остановиться)
Остановись и задай вопросы, если:
- не хватает требований (неясны инварианты/края),
- есть риск для данных/безопасности,
- изменения выходят за лимиты,
- нужно сетевое действие (у нас сеть restricted) или установка пакетов.

## 5) Формат результата (требуй всегда)
1) Короткий план шагов.
2) Патч (diff) минимального размера.
3) Команды проверки (что запустить).
4) Риски/края: “что могло сломаться”.

