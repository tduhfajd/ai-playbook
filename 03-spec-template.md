# Шаблон спеки (задача для ИИ и для тебя)

Заполняй это перед тем, как просить ИИ писать код. Цель — дать рельсы и объективные критерии.

Связанные артефакты (рекомендуется для длинных задач):
- `AGENTS.md` — контракт агента и границы.
- `PLANS.md` — живой план и прогресс.
- `handoff.md` — краткая память между сессиями.
- `evals/acceptance.md` — критерии завершения и проверки.

## 0) Название
Коротко: “что меняем и зачем”.

## 1) Контекст
- Где это в системе (модуль/страница/endpoint).
- Что сейчас происходит (1–2 абзаца).
- Ссылка на файлы/эндпоинты/таблицы.

## 2) Цель (ожидаемое поведение)
- Что должно уметь после изменения.
- Что точно НЕ должно измениться (инварианты).

## 3) Входы/выходы (контракты)
- API (routes, DTO, schemas).
- База данных (таблицы/поля/миграции).
- События/очереди (если есть).

## 4) Ограничения и запреты
- Какие файлы/части трогать нельзя.
- Какие зависимости добавлять нельзя.
- Производительность/безопасность/совместимость.

## 5) Edge cases
Список “краёв”, минимум 5 пунктов:
- пустые значения,
- неверные статусы,
- повторные запросы (idempotency),
- таймауты/ретраи,
- недоступность внешних сервисов.

## 6) Acceptance criteria (проверяемо)
Примеры:
- “тест X проходит”,
- “endpoint возвращает Y при Z”,
- “логируется событие A при B”,
- “миграция применима на пустую БД”.

## 7) План проверки (что запускать)
- Команды линтера/тестов.
- Минимальный manual smoke test.

## 8) Rollback / деградация
- Что произойдёт, если новая часть не работает (fallback).
- Как откатиться (если нужно).
